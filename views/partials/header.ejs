<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/style.css" rel="stylesheet">

<style>
  /* Reset mép trắng */
  html, body { margin: 0; padding: 0; }
  *, *::before, *::after { box-sizing: border-box; }

  :root { --brand-blue: #0ea5e9; }

  /* Navbar xanh toàn phần + nổi trên mọi thứ */
  .navbar-custom {
    background-color: var(--brand-blue);
    box-shadow: 0 2px 6px rgba(0,0,0,.15);
    position: sticky; top: 0; z-index: 1100;
  }

  .navbar-custom .navbar-brand,
  .navbar-custom .nav-link { color: #fff !important; }

  /* Dropdown nổi và nhận click */
  .dropdown-menu { z-index: 2000; }
  .avatar-sm { width: 32px; height: 32px; border-radius: 50%; object-fit: cover; }

  /* Trigger dropdown: dùng button để tránh nhảy # */
  .btn-ghost { background: transparent; border: 0; color: #fff; padding: .5rem .25rem; }
  .btn-ghost:focus { outline: none; box-shadow: none; }
</style>

<nav class="navbar navbar-expand-lg navbar-dark navbar-custom">
  <div class="container">
    <a class="navbar-brand fw-bold" href="/">KHÁCH SẠN PHENIKAA</a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMain"
      aria-controls="navMain" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navMain">
      <ul class="navbar-nav ms-auto align-items-lg-center">
        <li class="nav-item"><a class="nav-link" href="/">Trang chủ</a></li>
        <li class="nav-item"><a class="nav-link" href="/search">Tìm kiếm</a></li>

        <% if (currentUser) { %>
        <!-- Dropdown user -->
        <li class="nav-item dropdown ms-lg-3">
          <button class="btn-ghost nav-link dropdown-toggle d-flex align-items-center gap-2"
                  id="userMenuBtn" type="button" data-bs-toggle="dropdown" aria-expanded="false">
            <img src="<%= currentUser.avatar || '/images/default-avatar.jpg' %>" alt="avatar" class="avatar-sm">
            <span class="d-none d-md-inline"><%= currentUser.name %></span>
          </button>
          <ul class="dropdown-menu dropdown-menu-end shadow-sm" aria-labelledby="userMenuBtn">
            <li class="dropdown-header fw-semibold"><%= currentUser.name %></li>
            <li><a class="dropdown-item" href="/user/profile">Hồ sơ cá nhân</a></li>
            <li><a class="dropdown-item" href="/user/history">Lịch sử đặt phòng</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="/auth/logout">Đăng xuất</a></li>
          </ul>
        </li>
        <% } else { %>
        <li class="nav-item ms-lg-3"><a class="btn btn-light fw-semibold" href="/auth/login">Đăng nhập</a></li>
        <li class="nav-item ms-2"><a class="btn btn-outline-light fw-semibold" href="/auth/register">Đăng ký</a></li>
        <% } %>
      </ul>
    </div>
  </div>
</nav>

<!-- Bootstrap Bundle (cần có để dropdown hoạt động) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<!-- JS chung: chặn anchor #, khởi tạo dropdown, bỏ overlay che click -->
<script src="/js/main.js"></script>
